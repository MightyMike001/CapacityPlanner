<!DOCTYPE html>
<html lang="nl" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Motrac â€¢ Capacity Compass</title>
  <meta name="color-scheme" content="dark light">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-shell">
    <header class="topbar" role="banner">
      <div class="brand">
        <div class="brand-mark" aria-hidden="true">MT</div>
        <div class="brand-text">
          <span class="brand-title">Capacity Compass</span>
          <span class="brand-sub">Realtime planning cockpit</span>
        </div>
      </div>
      <div class="topbar-actions">
        <button class="btn ghost icon" id="btn-theme" type="button" aria-label="Schakel naar licht thema">
          <span class="icon" aria-hidden="true">ðŸŒ™</span>
          <span class="label">Licht thema</span>
        </button>
        <button class="btn secondary" onclick="openModal('about')">Over</button>
        <button class="btn" onclick="openDrawer()">Nieuwe taak</button>
      </div>
    </header>

    <main class="app-main" role="main">
      <section class="hero-panels" aria-label="Snelle acties en highlights">
        <article class="card hero-card">
          <div class="hero-header">
            <span class="eyebrow">Dashboard</span>
            <h1>Capaciteitsplanner</h1>
            <p>Een kalm overzicht van capaciteit, werkdruk en verlof voor al je vestigingen.</p>
          </div>
          <div class="hero-actions">
            <button class="btn" onclick="setTab('board')">Open planbord</button>
            <button class="btn secondary" onclick="setTab('table')">Bekijk tabel</button>
            <button class="btn ghost" onclick="setTab('insights')">Analyseer trends</button>
          </div>
        </article>
        <article class="card hero-card hero-stats">
          <h2>Datakwaliteit</h2>
          <p class="sub">Snelle controles op openstaande taken.</p>
          <dl class="metric-grid">
            <div>
              <dt>Datakwaliteit</dt>
              <dd id="kpi-ok">â€“</dd>
            </div>
            <div>
              <dt>SLA's risicovol</dt>
              <dd id="kpi-sla">â€“</dd>
            </div>
            <div>
              <dt>Open taken</dt>
              <dd id="kpi-open">â€“</dd>
            </div>
            <div>
              <dt>Te laat</dt>
              <dd id="kpi-late">â€“</dd>
            </div>
          </dl>
          <div class="hero-actions compact">
            <button class="btn small" onclick="toast('Auto-planning (demo) klaar')">Auto-planning</button>
            <button class="btn small secondary" onclick="toast('GeÃ«xporteerd')">Export CSV</button>
          </div>
        </article>
        <article class="card hero-card capacity-card">
          <h2>Capaciteitsmomentopname</h2>
          <p class="sub">Realtime berekening op basis van filters.</p>
          <div class="kpi-grid">
            <div class="kpi"><span class="value" id="kpi-cap">â€“</span><span class="label">Beschikbare uren</span></div>
            <div class="kpi"><span class="value" id="kpi-load">â€“</span><span class="label">Ingepland</span></div>
            <div class="kpi"><span class="value" id="kpi-util">â€“</span><span class="label">Benutting</span></div>
            <div class="kpi"><span class="value" id="kpi-backlog">â€“</span><span class="label">Backlog</span></div>
          </div>
        </article>
      </section>

      <section class="filters card" aria-labelledby="filters-title">
        <div class="filters-header">
          <h2 id="filters-title">Filters</h2>
          <div class="filter-actions">
            <button class="btn small ghost" id="btn-reset">Reset</button>
            <button class="btn small" id="btn-export">Export</button>
            <button class="btn small secondary" id="btn-import">Import</button>
          </div>
        </div>
        <div class="filters-grid">
          <label>Vestiging
            <select id="f-workshop"></select>
          </label>
          <label>Week (maandag)
            <input type="date" id="f-week">
          </label>
          <label>Jaar (verlofmatrix)
            <select id="f-year"></select>
          </label>
          <label>Skill
            <input type="text" id="f-skill" placeholder="bv. 386, 1252, Diagnose">
          </label>
        </div>
        <div class="chip-bar" id="chips" aria-live="polite"></div>
        <p class="filters-hint">Importeer JSON takenbestanden of maak snel nieuwe taken via het paneel "Nieuwe taak".</p>
        <input id="file" type="file" accept=".json,.csv,.xlsx" hidden />
      </section>

      <section class="leave card" aria-labelledby="leave-title">
        <div class="leave-header">
          <div>
            <h2 id="leave-title">Verlofmatrix</h2>
            <p>Overzicht van ingevoerde afwezigheid per collega. Pas uren aan in de cellen en kies een reden.</p>
          </div>
          <div class="legend" aria-hidden="true">
            <span><span class="legend-swatch leave-swatch--vakantie"></span>Vakantie</span>
            <span><span class="legend-swatch leave-swatch--verlof"></span>Verlof</span>
            <span><span class="legend-swatch leave-swatch--ziek"></span>Ziek</span>
            <span><span class="legend-swatch leave-swatch--training"></span>Training</span>
            <span><span class="legend-swatch leave-swatch--thuis"></span>Thuiswerk</span>
            <span><span class="legend-swatch leave-swatch--feestdag"></span>Feestdag</span>
            <span><span class="legend-swatch leave-swatch--deeltijd"></span>Deeltijd</span>
          </div>
        </div>
        <div class="leave-matrix-wrap">
          <div id="leave-matrix" role="group" aria-describedby="leave-caption"></div>
        </div>
        <p id="leave-caption" class="leave-caption">Lege cellen betekenen volledige beschikbaarheid. Vul het aantal afwezige uren in en kies een reden.</p>
      </section>

      <section class="planning card" aria-label="Planning weergaven">
        <div class="tablist" role="tablist">
          <button type="button" id="tab-board" class="tab active" role="tab" aria-selected="true" aria-controls="view-board" data-tab="board" onclick="setTab('board')">Board</button>
          <button type="button" id="tab-table" class="tab" role="tab" aria-selected="false" aria-controls="view-table" data-tab="table" onclick="setTab('table')">Tabel</button>
          <button type="button" id="tab-insights" class="tab" role="tab" aria-selected="false" aria-controls="view-insights" data-tab="insights" onclick="setTab('insights')">Insights</button>
        </div>
        <section id="view-board" role="tabpanel" aria-labelledby="tab-board">
          <div class="board-grid" id="board-grid"></div>
        </section>
        <section id="view-table" role="tabpanel" aria-labelledby="tab-table" hidden>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Order</th>
                  <th>Taak</th>
                  <th>Vestiging</th>
                  <th>Skill</th>
                  <th>Uren</th>
                  <th>Deadline</th>
                  <th>Prioriteit</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="tbody"></tbody>
            </table>
          </div>
        </section>
        <section id="view-insights" role="tabpanel" aria-labelledby="tab-insights" hidden>
          <div class="insights-grid">
            <article class="card inset">
              <div class="card-top">
                <span class="badge">Weekbalans</span>
                <span class="badge hours">320h cap</span>
              </div>
              <h3>Capaciteit vs. Werkdruk</h3>
              <p class="sub">Snelle indicatie per vestiging/week. Kleur op basis van overschrijding.</p>
              <div class="capacity-chart" id="capacity-chart">
                <div class="capacity-chart__empty">Grafiek wordt geladenâ€¦</div>
              </div>
              <div class="capacity-chart__legend" aria-hidden="true">
                <span class="legend-dot legend-dot--capacity"></span> Capaciteit
                <span class="legend-dot legend-dot--workload"></span> Werkaanbod
              </div>
            </article>
            <article class="card inset">
              <div class="card-top">
                <span class="badge">SLA's</span>
              </div>
              <h3>Naderende deadlines</h3>
              <p class="sub">Taken binnen 72 uur met norm &gt; 8 uur.</p>
              <div class="row">
                <span class="badge skill">Diagnose</span>
                <button class="btn small secondary">Open lijst</button>
              </div>
            </article>
          </div>
        </section>
      </section>
    </main>
  </div>

  <aside class="drawer" id="drawer" aria-hidden="true">
    <header>
      <h3>Nieuwe taak</h3>
      <button class="btn small secondary" onclick="closeDrawer()">Sluiten</button>
    </header>
    <div class="form-grid">
      <label>Titel<input id="t-title" placeholder="bv. Groene Stroom 386-setup"></label>
      <label>Vestiging
        <select id="t-ws"></select>
      </label>
      <label>Skill<input id="t-skill" placeholder="bv. 386, 1252, Diagnose"></label>
      <label>Uren<input id="t-hours" type="number" min="1" step="1" value="8"></label>
      <label>Deadline<input id="t-due" type="date"></label>
      <label>Prioriteit
        <select id="t-prio">
          <option>Normaal</option>
          <option>Hoog</option>
          <option>Laag</option>
        </select>
      </label>
      <label style="grid-column:1/-1">Status
        <select id="t-status">
          <option>Open</option>
          <option>In uitvoering</option>
          <option>Gereed</option>
          <option>Geblokkeerd</option>
        </select>
      </label>
    </div>
    <div class="actions">
      <button class="btn" onclick="saveTask()">Opslaan</button>
      <button class="btn secondary" onclick="clearTask()">Leegmaken</button>
    </div>
  </aside>

  <div class="modal" id="modal-about" role="dialog" aria-modal="true" aria-labelledby="about-title" aria-hidden="true" hidden onclick="if(event.target===this) closeModal('about')">
    <div class="modal-box">
      <h3 id="about-title">Over deze cockpit</h3>
      <p>High-design dashboard met focus op rust, overzicht en snelle acties voor planners.</p>
      <div class="modal-actions">
        <button class="btn small" onclick="closeModal('about')">Prima</button>
        <button class="btn small secondary" onclick="toast('Documentatie geopend')">Documentatie</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="assertive">Gereed</div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
