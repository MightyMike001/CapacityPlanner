<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Motrac • High Design Template</title>
  <meta name="color-scheme" content="dark light">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- Topbar -->
    <nav class="nav">
      <div class="brand">
        <div class="logo">MT</div>
        <div class="title">Capaciteitsplanner</div>
      </div>
      <div class="actions">
        <button class="btn secondary" onclick="openModal('about')">Over</button>
        <button class="btn" onclick="openDrawer()">Nieuwe taak</button>
      </div>
    </nav>

    <!-- Sidebar -->
    <aside class="side">
      <div class="panel">
        <h3>Filters</h3>
        <label>Vestiging
          <select id="f-workshop"></select>
        </label>
        <label>Week (maandag)
          <input type="date" id="f-week">
        </label>
        <label>Jaar (verlofmatrix)
          <select id="f-year"></select>
        </label>
        <label>Skill
          <input type="text" id="f-skill" placeholder="bv. 386, 1252, Diagnose">
        </label>
        <div class="chips" id="chips"></div>
        <button class="btn small ghost" id="btn-reset">Reset filters</button>
      </div>

      <div class="panel">
        <h3>Status</h3>
        <div class="kpis">
          <div class="kpi"><span class="v" id="kpi-cap">–</span><small>Beschikbare uren</small></div>
          <div class="kpi"><span class="v" id="kpi-load">–</span><small>Ingepland</small></div>
          <div class="kpi"><span class="v" id="kpi-util">–</span><small>Benutting</small></div>
          <div class="kpi"><span class="v" id="kpi-backlog">–</span><small>Backlog</small></div>
        </div>
      </div>

      <div class="panel">
        <h3>Acties</h3>
        <button class="btn small" id="btn-export">Export</button>
        <button class="btn small secondary" id="btn-import">Import</button>
        <input id="file" type="file" accept=".json,.csv,.xlsx" hidden />
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <!-- Hero -->
      <section class="hero">
        <div class="card">
          <h1>Capaciteitsplanner</h1>
          <p>Eén rustgevende omgeving voor planning, capaciteit en verlof.</p>
          <div class="cta-row">
            <button class="btn" onclick="setTab('board')">Board</button>
            <button class="btn secondary" onclick="setTab('table')">Tabel</button>
            <button class="btn ghost" onclick="setTab('insights')">Insights</button>
          </div>
        </div>
        <div class="card">
          <div class="kpis" style="grid-template-columns:repeat(2,1fr);gap:12px">
            <div class="kpi ok"><span class="v" id="kpi-ok">98%</span><small>Datakwaliteit</small></div>
            <div class="kpi warn"><span class="v" id="kpi-sla">12</span><small>SLA’s risicovol</small></div>
            <div class="kpi"><span class="v" id="kpi-open">43</span><small>Open taken</small></div>
            <div class="kpi danger"><span class="v" id="kpi-late">7</span><small>Te laat</small></div>
          </div>
          <div class="cta-row">
            <button class="btn small" onclick="toast('Auto-planning (demo) klaar')">Auto-planning</button>
            <button class="btn small secondary" onclick="toast('Geëxporteerd')">Export CSV</button>
          </div>
        </div>
      </section>

      <!-- Leave matrix -->
      <section class="leave-section" aria-labelledby="leave-title">
        <div class="leave-header">
          <div>
            <h2 id="leave-title">Verlofmatrix</h2>
            <p>Direct overzicht van geplande afwezigheid en capaciteit per teamlid voor de komende weken.</p>
          </div>
          <div class="leave-legend" aria-hidden="true">
            <div class="legend-item"><span class="legend-swatch leave-swatch--vakantie"></span>Vakantie</div>
            <div class="legend-item"><span class="legend-swatch leave-swatch--verlof"></span>Verlof</div>
            <div class="legend-item"><span class="legend-swatch leave-swatch--ziek"></span>Ziek</div>
            <div class="legend-item"><span class="legend-swatch leave-swatch--training"></span>Training</div>
            <div class="legend-item"><span class="legend-swatch leave-swatch--thuis"></span>Thuiswerk</div>
            <div class="legend-item"><span class="legend-swatch leave-swatch--feestdag"></span>Feestdag</div>
            <div class="legend-item"><span class="legend-swatch leave-swatch--deeltijd"></span>Deeltijd</div>
          </div>
        </div>
        <div class="leave-matrix-wrap">
          <div id="leave-matrix" role="group" aria-describedby="leave-caption"></div>
        </div>
        <p id="leave-caption" style="margin:12px 0 0; font-size:12px; color:var(--muted);">Lege cellen betekenen volledig beschikbaar. Vul hier het aantal afwezige uren in; kleuren tonen de reden.</p>
      </section>

      <!-- Tabs -->
      <div class="tabs" role="tablist" aria-label="Planning weergaven">
        <button type="button" id="tab-board" class="tab active" role="tab" aria-selected="true" aria-controls="view-board" data-tab="board" onclick="setTab('board')">Board</button>
        <button type="button" id="tab-table" class="tab" role="tab" aria-selected="false" aria-controls="view-table" data-tab="table" onclick="setTab('table')">Tabel</button>
        <button type="button" id="tab-insights" class="tab" role="tab" aria-selected="false" aria-controls="view-insights" data-tab="insights" onclick="setTab('insights')">Insights</button>
      </div>

      <!-- Board -->
      <section id="view-board" role="tabpanel" aria-labelledby="tab-board">
        <div class="grid" id="board-grid">
          <!-- Cards komen hier -->
        </div>
      </section>

      <!-- Table -->
      <section id="view-table" role="tabpanel" aria-labelledby="tab-table" hidden>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Order</th><th>Taak</th><th>Vestiging</th><th>Skill</th><th>Uren</th><th>Deadline</th><th>Prioriteit</th><th>Status</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>
      </section>

      <!-- Insights -->
      <section id="view-insights" role="tabpanel" aria-labelledby="tab-insights" hidden>
        <div class="grid">
          <div class="card">
            <div class="top">
              <span class="badge">Weekbalans</span>
              <span class="badge hours">320h cap</span>
            </div>
            <h4>Capaciteit vs. Werkdruk</h4>
            <p class="sub">Snelle indicatie per vestiging/week. Kleur op basis van overschrijding.</p>
            <div class="capacity-chart" id="capacity-chart">
              <div class="capacity-chart__empty">Grafiek wordt geladen…</div>
            </div>
            <div class="capacity-chart__legend" aria-hidden="true">
              <span class="legend-dot legend-dot--capacity"></span> Capaciteit
              <span class="legend-dot legend-dot--workload"></span> Werkaanbod
            </div>
            <div class="row"><span class="badge prio">Hoog risico</span><button class="btn small" onclick="toast('Insight bijgewerkt')">V verversen</button></div>
          </div>
          <div class="card">
            <div class="top"><span class="badge">SLA’s</span></div>
            <h4>Naderende deadlines</h4>
            <p class="sub">Taken binnen 72 uur met norm &gt; 8 uur.</p>
            <div class="row"><span class="badge skill">Diagnose</span><button class="btn small secondary">Open lijst</button></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Drawer (Nieuwe taak) -->
  <aside class="drawer" id="drawer">
    <header>
      <h3>Nieuwe taak</h3>
      <button class="btn small secondary" onclick="closeDrawer()">Sluiten</button>
    </header>
    <div class="form-grid">
      <label>Titel<input id="t-title" placeholder="bv. Groene Stroom 386-setup"></label>
      <label>Vestiging
        <select id="t-ws"></select>
      </label>
      <label>Skill<input id="t-skill" placeholder="bv. 386, 1252, Diagnose"></label>
      <label>Uren<input id="t-hours" type="number" min="1" step="1" value="8"></label>
      <label>Deadline<input id="t-due" type="date"></label>
      <label>Prioriteit
        <select id="t-prio">
          <option>Normaal</option>
          <option>Hoog</option>
          <option>Laag</option>
        </select>
      </label>
      <label style="grid-column:1/-1">Status
        <select id="t-status">
          <option>Open</option>
          <option>In uitvoering</option>
          <option>Gereed</option>
          <option>Geblokkeerd</option>
        </select>
      </label>
    </div>
    <div class="actions">
      <button class="btn" onclick="saveTask()">Opslaan</button>
      <button class="btn secondary" onclick="clearTask()">Leegmaken</button>
    </div>
  </aside>

  <!-- Modal Over -->
  <div class="modal" id="modal-about" onclick="if(event.target===this) closeModal('about')">
    <div class="box">
      <h3 style="margin-top:0">Over deze template</h3>
      <p>High-design HTML in de stijl van je MotracTransport-site. Donker thema, rood-accenten, glasachtige panelen, micro-interacties.</p>
      <div style="display:flex; gap:10px; margin-top:8px">
        <button class="btn small" onclick="closeModal('about')">OK</button>
        <button class="btn small secondary" onclick="toast('Documentatie geopend')">Documentatie</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast">Gereed</div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
